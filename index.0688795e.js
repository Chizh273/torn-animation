var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},i={},s=t.parcelRequire6af4;null==s&&((s=function(t){if(t in e)return e[t].exports;if(t in i){var s=i[t];delete i[t];var a={id:t,exports:{}};return e[t]=a,s.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){i[t]=e},t.parcelRequire6af4=s);var a=s("ltQS0"),r=s("axHCK"),n=s("d6DLj"),h=s("c6GPX"),c=s("d4PzE"),o=s("2b25J"),l=s("466t7"),d=s("5mF43"),u=s("8208i"),f=s("aisEY");const p=window.innerWidth+600,g=window.innerHeight+600,m=new class{get tick$(){return this._tick$.asObservable()}constructor(t,e,i,s,a,n=100,h=7,c="black",o="white"){this.canvasFactory=t,this.document=e,this.width=i,this.height=s,this.offset=a,this.lineLifeTicks=n,this.speed=h,this.backgroundColor=c,this.lineColor=o,this.realCanvas=this.canvasFactory.createCanvas(this.width,this.height),this.leftSideImg=this.document.createElement("img"),this.rightSideImg=this.document.createElement("img"),this._tick$=new(0,r.BehaviorSubject)(0),this.sides=(0,f.generateSides)(this.width,this.height);const l=e.querySelector(".root");l?.appendChild(this.realCanvas.canvas),this.setup()}dispatch(){this._tick$.next(this._tick$.value+1)}setup(){this.realCanvas.fill(this.backgroundColor),this.tick$.pipe((0,n.filter)((t=>t%this.lineLifeTicks==0)),(0,c.map)((()=>{this.currentLine=(0,f.createLine)(this.sides,this.offset);const t=(0,f.calcLineLength)(this.currentLine.start,this.currentLine.end),e=(0,f.generateTornLine)(this.currentLine.start,this.currentLine.end,t,parseInt(""+t/7,10),Math.PI);return(0,f.generateFigureShape)(e,this.width,this.height,this.sides)})),(0,l.switchMap)((t=>(0,h.forkJoin)([this.drawPathOnTempCanvas(t.left),this.drawPathOnTempCanvas(t.right)]))),(0,d.tap)((([t,e])=>{this.leftSideImg.src=t,this.rightSideImg.src=e}))).subscribe(),this.tick$.pipe((0,n.filter)((t=>t%this.lineLifeTicks!=0)),(0,c.map)((t=>t%this.lineLifeTicks)),(0,c.map)((t=>{const e={x:this.currentLine.end.x-this.currentLine.start.x,y:this.currentLine.end.y-this.currentLine.start.y},i=(0,f.calcLineAngle)(e);return{left:(0,f.calcPointInPolarSystem)(i-Math.PI/2,t/this.speed),right:(0,f.calcPointInPolarSystem)(i+Math.PI/2,t/this.speed)}})),(0,l.switchMap)((({left:t,right:e})=>(0,h.forkJoin)([this.realCanvas.reset(),this.realCanvas.clear(),(0,u.fromPromise)(Promise.resolve().then((()=>this.realCanvas.fill(this.backgroundColor)))),this.realCanvas.drawImage(this.leftSideImg,t),this.realCanvas.drawImage(this.rightSideImg,e)])))).subscribe()}drawPathOnTempCanvas(t){return(0,o.of)(this.canvasFactory.createCanvas(this.width,this.height)).pipe((0,l.switchMap)((e=>(0,h.forkJoin)([e.drawPath(t,this.lineColor,this.backgroundColor),e.drawImage(this.realCanvas.canvas,{x:0,y:0})]).pipe((0,l.switchMap)((()=>e.toDataUrl()))))))}}(new(0,a.CanvasFactory)(document),document,p,g,{x:600,y:600});!function t(){m.dispatch(),requestAnimationFrame(t)}();
//# sourceMappingURL=index.0688795e.js.map
