var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},i={},s=t.parcelRequire6af4;null==s&&((s=function(t){if(t in e)return e[t].exports;if(t in i){var s=i[t];delete i[t];var n={id:t,exports:{}};return e[t]=n,s.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){i[t]=e},t.parcelRequire6af4=s);var n=s("axHCK"),a=s("d6DLj"),r=s("c6GPX"),c=s("d4PzE"),h=s("466t7"),o=s("5mF43"),d=s("aisEY");var l=s("b8iNZ"),f=s("ltQS0");const u=window.innerWidth+600,p=window.innerHeight+600,g=new(0,f.Canvas)(document.createElement("canvas"),u,p),v=document.createElement("img");document.body.append(g.canvas);const L=new class{get tick$(){return this._tick$.asObservable()}constructor(t,e,i,s,a,r){this.canvas=t,this.prevCanvasImg=e,this.width=i,this.height=s,this.offset=a,this.settings=r,this._tick$=new(0,n.BehaviorSubject)(0),this.sides=(0,d.generateSides)(this.width,this.height),this.setup()}dispatch(){this._tick$.next(this._tick$.value+1)}setup(){this.canvas.fill(this.settings.data.backgroundColor),this.tick$.pipe((0,a.filter)((t=>t%this.settings.data.lineLifeTicks==0)),(0,h.switchMap)((()=>this.canvas.toDataUrl())),(0,o.tap)((t=>{this.prevCanvasImg.src=t}))).subscribe((()=>{this.currentLine=(0,d.createLine)(this.sides,this.offset);const t=(0,d.calcLineLength)(this.currentLine.start,this.currentLine.end);this.tornLine=(0,d.generateTornLine)(this.currentLine.start,this.currentLine.end,t,parseInt(""+t/5,10),Math.PI)})),this.tick$.pipe((0,a.filter)((t=>t%this.settings.data.lineLifeTicks!=0)),(0,c.map)((t=>t%this.settings.data.lineLifeTicks)),(0,c.map)((t=>{const e={x:this.currentLine.end.x-this.currentLine.start.x,y:this.currentLine.end.y-this.currentLine.start.y},i=(0,d.calcLineAngle)(e),s=Math.PI/2;return{left:(0,d.calcPointInPolarSystem)(i+s,t/this.settings.data.distanceCoefficient),right:(0,d.calcPointInPolarSystem)(i-s,t/this.settings.data.distanceCoefficient)}})),(0,c.map)((({left:t,right:e})=>({left:this.tornLine.map((e=>(0,d.applyOffset)(e,t))),right:this.tornLine.reverse().map((t=>(0,d.applyOffset)(t,e)))}))),(0,h.switchMap)((t=>(0,r.forkJoin)([this.canvas.drawImage(this.prevCanvasImg,{x:0,y:0}),this.canvas.drawFigure(t,this.settings.data.lineColor,this.settings.data.backgroundColor)])))).subscribe()}}(g,v,u,p,{x:600,y:600},l.settings);console.log(l.settings),function t(){L.dispatch(),requestAnimationFrame(t)}();
//# sourceMappingURL=v1.29ab470d.js.map
