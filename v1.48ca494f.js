var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},i={},s=t.parcelRequire6af4;null==s&&((s=function(t){if(t in e)return e[t].exports;if(t in i){var s=i[t];delete i[t];var n={id:t,exports:{}};return e[t]=n,s.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){i[t]=e},t.parcelRequire6af4=s);var n=s("axHCK"),r=s("d6DLj"),a=s("c6GPX"),h=s("d4PzE"),c=s("466t7"),o=s("5mF43"),l=s("aisEY");var d=s("ltQS0");const p=window.innerWidth+600,u=window.innerHeight+600,f=new(0,d.Canvas)(document.createElement("canvas"),p,u),g=document.createElement("img");document.body.append(f.canvas);const v=new class{get tick$(){return this._tick$.asObservable()}constructor(t,e,i,s,r,a=100,h=7,c="black",o="white"){this.canvas=t,this.prevCanvasImg=e,this.width=i,this.height=s,this.offset=r,this.lineLifeTicks=a,this.speed=h,this.backgroundColor=c,this.lineColor=o,this._tick$=new(0,n.BehaviorSubject)(0),this.sides=(0,l.generateSides)(this.width,this.height),this.setup()}dispatch(){this._tick$.next(this._tick$.value+1)}setup(){this.canvas.fill(this.backgroundColor),this.tick$.pipe((0,r.filter)((t=>t%this.lineLifeTicks==0)),(0,c.switchMap)((()=>this.canvas.toDataUrl())),(0,o.tap)((t=>{this.prevCanvasImg.src=t}))).subscribe((()=>{this.currentLine=(0,l.createLine)(this.sides,this.offset);const t=(0,l.calcLineLength)(this.currentLine.start,this.currentLine.end);this.tornLine=(0,l.generateTornLine)(this.currentLine.start,this.currentLine.end,t,parseInt(""+t/5,10),Math.PI)})),this.tick$.pipe((0,r.filter)((t=>t%this.lineLifeTicks!=0)),(0,h.map)((t=>t%this.lineLifeTicks)),(0,h.map)((t=>{const e={x:this.currentLine.end.x-this.currentLine.start.x,y:this.currentLine.end.y-this.currentLine.start.y},i=(0,l.calcLineAngle)(e);return{left:(0,l.calcPointInPolarSystem)(i+Math.PI/2,t/this.speed),right:(0,l.calcPointInPolarSystem)(i-Math.PI/2,t/this.speed)}})),(0,h.map)((({left:t,right:e})=>({left:this.tornLine.map((e=>(0,l.applyOffset)(e,t))),right:this.tornLine.reverse().map((t=>(0,l.applyOffset)(t,e)))}))),(0,c.switchMap)((t=>(0,a.forkJoin)([this.canvas.drawImage(this.prevCanvasImg,{x:0,y:0}),this.canvas.drawFigure(t,this.lineColor,this.backgroundColor)])))).subscribe()}}(f,g,p,u,{x:600,y:600});!function t(){v.dispatch(),requestAnimationFrame(t)}();
//# sourceMappingURL=v1.48ca494f.js.map
